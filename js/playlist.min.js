(function(e,m){var o="";o+='<div id="extended-controls-pre">';o+='<span id="prev-track" class="glyphicon glyphicon-chevron-left"></span>';o+='<span id="next-track" class="glyphicon glyphicon-chevron-right"></span>';o+="</div>";var h="";h+='<div id="extended-controls-post">';h+='<div id="volume-container">';h+='<span class="glyphicon glyphicon-volume-down"> </span>';h+='<input id="volume-slider" type="range" min="0" max="1" step="0.01" value="0.5" />';h+='<span class="glyphicon glyphicon-volume-up"> </span>';h+="</div>";h+="</div>";h+='<div style="clear:both;"></div>';var s=0.5,c=e("#playlist"),n=c.find("li").size(),l=10,f=0,k=0;var j="";j+='<div id="playlist-info-container">';j+='<span id="playlist-info-number-tracks">'+n+"</span> tracks";j+=', <span id="playlist-info-duration"></span> playing time';j+="</div>";var u=m.createAll({trackEnded:function(){var a=e("ol li.playing").next();if(!a.length){a=e("ol li").first()}a.addClass("playing").siblings().removeClass("playing");v.load(e("a",a).attr("data-src"));v.play()}}),w=e(".audiojs"),v=u[0];if(n>1){w.before(o);c.before(j);e("#playlist li").each(function(a,x){e(x).removeClass("playing")});var b=c.find("li a");var i=0;r(i)}function r(a){if(a>n){d();var y=t(k);e("#playlist-info-duration").html(y);return false}var x=new Audio();x.src=e(b[a]).data("src");x.preload="metadataonly";(function(z){z.addEventListener("loadedmetadata",function(){var A=e(this)[0].duration;k+=A;var B=t(A);c.find("li:eq("+a+") span.track-duration").html(B);++i;z.src=e(b[i]).data("src");r(i)})})(x)}w.after(h);function t(x){if(x==""){return}var z=Math.round(x)%60;var y=Math.floor(x/60)%60;var a=Math.floor(x/3600);if(z<10){z="0"+z}if(y<10){y="0"+y}if(a==0){return y+":"+z}return a+":"+y+":"+z}function d(){first=e("ol a").attr("data-src");e("ol li").first().addClass("playing");v.load(first)}m.events.addListener(v.source,"error",function(a){if(f<l){f++;w.addClass("loading");w.removeClass("error");q()}});function g(x){var a=x.val();if(a!=s){s=a;v.setVolume(a)}}function q(){if(n>1){var a=e("li.playing").next();if(!a.length){a=e("ol li").first()}a.click()}}function p(){if(n>1){var a=e("li.playing").prev();if(!a.length){a=e("ol li").last()}a.click()}}e("body").on("click","#volume-slider",function(a){g(e(this))});e("body").on("mousemove","#volume-slider",function(a){g(e(this))});e("body").on("click","#playlist li",function(a){a.preventDefault();e(this).addClass("playing").siblings().removeClass("playing");v.load(e("a",this).attr("data-src"));v.play()});e("body").on("click","#prev-track",function(a){p()});e("body").on("click","#next-track",function(a){q()});e(document).keydown(function(x){var a=x.charCode?x.charCode:x.keyCode;if(a==39){q()}else{if(a==37){p()}else{if(a==32){v.playPause()}}}})})(jQuery,audiojs);