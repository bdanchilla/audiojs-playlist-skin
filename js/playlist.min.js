!function(a,b){function c(b){if(b>m){e();var f=d(p);return a("#playlist-info-duration").html(f),!1}var g=new Audio;g.src=a(u[b]).data("src"),g.preload="metadataonly",function(e){e.addEventListener("loadedmetadata",function(){var f=a(this)[0].duration;p+=f;var g=d(f);l.find("li:eq("+b+") span.track-duration").html(g),++v,e.src=a(u[v]).data("src"),c(v)})}(g)}function d(a){if(""!=a){var b=Math.round(a)%60,c=Math.floor(a/60)%60,d=Math.floor(a/3600);return 10>b&&(b="0"+b),10>c&&(c="0"+c),0==d?c+":"+b:d+":"+c+":"+b}}function e(){first=a("ol a").attr("data-src"),a("ol li").first().addClass("playing"),t.load(first)}function f(a){var b=a.val();b!=k&&(k=b,t.setVolume(b))}function g(){if(m>1){var b=a("li.playing").next();b.length||(b=a("ol li").first()),b.click()}}function h(){if(m>1){var b=a("li.playing").prev();b.length||(b=a("ol li").last()),b.click()}}var i="";i+='<div id="extended-controls-pre">',i+='<span id="prev-track" class="glyphicon glyphicon-chevron-left"></span>',i+='<span id="next-track" class="glyphicon glyphicon-chevron-right"></span>',i+="</div>";var j="";j+='<div id="extended-controls-post">',j+='<div id="volume-container">',j+='<span class="glyphicon glyphicon-volume-down"> </span>',j+='<input id="volume-slider" type="range" min="0" max="1" step="0.01" value="0.5" />',j+='<span class="glyphicon glyphicon-volume-up"> </span>',j+="</div>",j+="</div>",j+='<div style="clear:both;"></div>';var k=.5,l=a("#playlist"),m=l.find("li").size(),n=10,o=0,p=0,q="";q+='<div id="playlist-info-container">',q+='<span id="playlist-info-number-tracks">'+m+"</span> tracks",q+=', <span id="playlist-info-duration"></span> playing time',q+="</div>";var r=b.createAll({trackEnded:function(){var b=a("ol li.playing").next();b.length||(b=a("ol li").first()),b.addClass("playing").siblings().removeClass("playing"),t.load(a("a",b).attr("data-src")),t.play()}}),s=a(".audiojs"),t=r[0];if(m>1){s.before(i),l.before(q),a("#playlist li").each(function(b,c){a(c).removeClass("playing")});var u=l.find("li a"),v=0;c(v)}s.after(j),b.events.addListener(t.source,"error",function(){n>o&&(o++,s.addClass("loading"),s.removeClass("error"),g())}),a("body").on("mousewheel DOMMouseScroll",".audiojs, #extended-controls-post, #extended-controls-pre",function(b){b.preventDefault(),b.originalEvent.wheelDelta>0||b.originalEvent.detail<0?(k=parseFloat(k)+.05,k>1?k=1:(t.setVolume(k),a("#volume-slider").val(k))):(k=parseFloat(k)-.05,0>k?k=0:(t.setVolume(k),a("#volume-slider").val(k)))}),a("body").on("click","#volume-slider",function(){f(a(this))}),a("body").on("mousemove","#volume-slider",function(){f(a(this))}),a("body").on("click","#playlist li",function(b){b.preventDefault(),a(this).addClass("playing").siblings().removeClass("playing"),t.load(a("a",this).attr("data-src")),t.play()}),a("body").on("click","#prev-track",function(){h()}),a("body").on("click","#next-track",function(){g()}),a(document).keydown(function(a){var b=a.charCode?a.charCode:a.keyCode;39==b?g():37==b?h():32==b&&t.playPause()})}(jQuery,audiojs);